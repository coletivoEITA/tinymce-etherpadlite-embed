/**
 * Etherpad Lite plug-in for TinyMCE version 3.x
 * @author     Daniel Tygel
 * @version    $Rev: 1.0 $
 * @package    etherpadlite
 * @link https://github.com/dtygel/tinymce-etherpadlite-embed
 * EtherPad plugin for TinyMCE
 * AFFERO LICENSE
 */(function(){function t(){var e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",t=10,n="";for(var r=0;r<t;r++){var i=Math.floor(Math.random()*e.length);n+=e.substring(i,i+1)}return n}var e=["en","pt"];e.indexOf(tinymce.settings.language)>=0&&tinymce.PluginManager.requireLangPack("etherpadlite"),tinymce.create("tinymce.plugins.EtherPadLitePlugin",{init:function(e,n){var r=this;r.editor=e;if(!e.getParam("plugin_etherpadlite_padServerUrl")||e.getParam("plugin_etherpadlite_padServerUrl")=="")return null;var i=e.getParam("plugin_etherpadlite_padServerUrl"),s=e.getParam("plugin_etherpadlite_padNamesPrefix")?e.getParam("plugin_etherpadlite_padNamesPrefix"):"",o=e.getParam("plugin_etherpadlite_padWidth")?e.getParam("plugin_etherpadlite_padWidth"):"100%",u=e.getParam("plugin_etherpadlite_padHeight")?e.getParam("plugin_etherpadlite_padHeight"):"400";e.addCommand("mceEtherPadLite",function(){var n=s+"."+t(),r="<iframe name='embed_readwrite' src='"+i+n+"?showControls=true&showChat=true&&alwaysShowChat=true&lang=pt&showLineNumbers=true&useMonospaceFont=false' width='"+o+"' height='"+u+"'></iframe>";e.execCommand("mceInsertContent",!1,r)}),e.addButton("etherpadlite",{title:"etherpadlite.desc",cmd:"mceEtherPadLite",image:n+"/img/etherpadlite.gif"})},getInfo:function(){return{longname:"Insert a collaborative text with Etherpad Lite",author:"Daniel Tygel",authorurl:"http://cirandas.net/dtygel",infourl:"https://github.com/dtygel/tinymce-etherpadlite-embed",version:tinymce.majorVersion+"."+tinymce.minorVersion}}}),tinymce.PluginManager.add("etherpadlite",tinymce.plugins.EtherPadLitePlugin)})();